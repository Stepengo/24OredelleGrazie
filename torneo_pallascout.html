<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Torneo Pallascout</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #f0f0f0;
      margin: 0;
      padding: 20px;
    }
    h1 {
      margin-bottom: 20px;
    }
    .scoreboard {
      display: flex;
      justify-content: center;
      gap: 50px;
      margin-bottom: 20px;
    }
    .team {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      min-width: 150px;
    }
    .score {
      font-size: 3em;
      margin: 20px 0;
    }
    button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .btn-inc {
      background: #4CAF50;
      color: white;
    }
    .btn-reset {
      background: #f44336;
      color: white;
    }
    .btn-sync {
      background: #2196F3;
      color: white;
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h1>Torneo Pallascout A</h1>

  <div class="scoreboard">
    <div class="team">
      <h2>Squadra A</h2>
      <div id="scoreA" class="score">0</div>
      <button class="btn-inc" onclick="incrementaA()">+1</button>
    </div>
    <div class="team">
      <h2>Squadra B</h2>
      <div id="scoreB" class="score">0</div>
      <button class="btn-inc" onclick="incrementaB()">+1</button>
    </div>
  </div>

  <button class="btn-reset" onclick="reset()">Reset</button>
  <br>
  <button class="btn-sync" onclick="sincronizza()">ðŸ’¾ Sincronizza con Google Sheets</button>

  <script>
    // ID del tuo Google Sheet (puoi lasciarlo o passarlo dallo script Apps Script)
    const SPREADSHEET_ID = '1LNicVCfBb7kdgBAQivzh1Vdw9vaaSLzc26dxsPf-kUY';

    // Carica i dati dal localStorage se ci sono
    let torneoData = JSON.parse(localStorage.getItem("torneoData")) || {
      punteggioA: 0,
      punteggioB: 0
    };

    // Aggiorna l'interfaccia
    function aggiornaUI() {
      document.getElementById("scoreA").innerText = torneoData.punteggioA;
      document.getElementById("scoreB").innerText = torneoData.punteggioB;
      localStorage.setItem("torneoData", JSON.stringify(torneoData)); // salvataggio locale
    }

    // Pulsanti che modificano solo i dati locali
    function incrementaA() {
      torneoData.punteggioA++;
      aggiornaUI();
    }
    function incrementaB() {
      torneoData.punteggioB++;
      aggiornaUI();
    }
    function reset() {
      torneoData = { punteggioA: 0, punteggioB: 0 };
      aggiornaUI();
    }

    // Funzione di sincronizzazione manuale
    function sincronizza() {
      fetch("https://script.google.com/macros/s/AKfycbzAMJq3rk3zNCgqJWshYE0CnXZUHdEkpMRe4CattfHk-SWwe9LCLPFJctOLA128_oCuQQ/exec", {
        method: "POST",
        body: JSON.stringify(torneoData)
      })
      .then(res => res.json())
      .then(data => {
        alert("Dati sincronizzati con successo!");
      })
      .catch(err => {
        console.error(err);
        alert("Errore di sincronizzazione");
      });
    }

    // Allâ€™avvio aggiorno lâ€™interfaccia coi dati salvati
    window.onload = aggiornaUI;
  </script>

</body>
</html>
